<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Octopress | Alvin Zhu]]></title>
  <link href="http://gbammc.github.io/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://gbammc.github.io/"/>
  <updated>2014-08-26T12:13:05+08:00</updated>
  <id>http://gbammc.github.io/</id>
  <author>
    <name><![CDATA[Alvin Zhu]]></name>
    <email><![CDATA[gbammc@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[安装和配置Octopress]]></title>
    <link href="http://gbammc.github.io/blog/2013/10/02/an-zhuang-he-pei-zhi-octopress/"/>
    <updated>2013-10-02T21:26:00+08:00</updated>
    <id>http://gbammc.github.io/blog/2013/10/02/an-zhuang-he-pei-zhi-octopress</id>
    <content type="html"><![CDATA[<h2>前言：</h2>

<p>在平时的学习中，深深受益于网络上很多乐意分享自己学习成果的大牛，因此也想找一个途径来记录并分享自己的学习情况，并希望藉此能促进自己的练级速度和深度，所以最终也决定以写blog的形式来做这件事。</p>

<p>最近程序猿界流行用Octopress + Github Pages的方式来搭建自己的个人blog，所以也就跟风学习一下。（主要是觉得Octopress是开源的，自由度很高，不像某度，某sdn等，会强插各种没用的广告或效果。<strong>Less is more.</strong> 越纯粹，越好。）</p>

<!-- more -->


<hr />

<h2>安装：</h2>

<p>不知道什么原因，跟着<a href="http://octopress.org/">Octopress</a>官网的教程一步步做，在输入<code>rake deploy</code>后会出现以下问题：</p>

<p>``` bash</p>

<h2>Pushing generated _deploy website</h2>

<p>To git@github.com:gbammc/gbammc.github.io.git
 ! [rejected]        master &ndash;> master (non-fast-forward)
error: failed to push some refs to &lsquo;git@github.com:gbammc/gbammc.github.io.git&rsquo;
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. &lsquo;git pull&rsquo;)
hint: before pushing again.
hint: See the &lsquo;Note about fast-forwards&rsquo; in &lsquo;git push &mdash;help&rsquo; for details.
```</p>

<p>又经过多次搜索大牛的文章以后，终于在按照<a href="http://evsseny.appspot.com/2012/03/30/Octopress-blog-install.html">这里</a>的步骤以后安装完成。为免日后找不到，就在这里再列一下吧。</p>

<h3>安装rvm和ruby</h3>

<p>首先安装rvm：</p>

<p><code>bash
bash -s stable &lt; &lt;(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)
</code></p>

<p>然后设置classpath ( shell 下 )：</p>

<p>``` bash</p>

<pre><code>echo '[[ -s "$HOME/.rvm/scripts/rvm" ]] &amp;&amp; . "$HOME/.rvm/scripts/rvm"
source ~/.bash_profile
</code></pre>

<p>```</p>

<p>最后安装ruby：</p>

<p><code>bash    
rvm install 1.9.3 &amp;&amp; rvm use 1.9.3
rvm rubygems latest
</code></p>

<p>最新版的Octopress只支持ruby 1.9.3版本以上，所以已经安装旧版ruby的同学还需升级一下。</p>

<h3>安装Octopress</h3>

<p>先从github上将源码clone下来：</p>

<p><code>bash
git clone git://github.com/imathis/octopress.git octopress    # 从github clone octopress的源代码，后面的octopress是本地存放文件夹的名称，可以自定
cd octopress      # 进入所选的文件夹
ruby --version    # 应该显示Ruby 1.9.3
</code></p>

<p>然后安装一些依赖：</p>

<p><code>bash
gem install bundler
bundle install
rake install    # 安装主题
rake preview    # 本地预览 （http://localhost:4000/）
</code></p>

<h3>把blog部署到github：</h3>

<p>创建一个名称为user_name.github.com的repo（必须使用username.github.com这种格式命名仓库，页面生成需要几分钟的时间才可以正常访问<code>http://user_name.github.com</code>或者<code>http://user_name.github.io</code>）</p>

<p><code>bash
rake setup_github_pages # 和github创建关联
git@github.com:your_username/your_username.github.com.git   # 按提示输入github URL
rake generate # 把你所有编辑的内容生成你的Blog静态页面
rake deploy   # &lt;span class="goog_qs-tidbit goog_qs-tidbit-0"&gt;如果检查没有任何问题就可以 push 你的 blog 到 github master branch&lt;/span&gt;
＃ 状态检查
cd ~/octopress
git status   # 应该显示 On branch source
cd _deploy/  # 应该显示 On branch master
＃ 最后提交到source branch
git add .
git commit -m 'first commit'
git push origin source # 如果这一步出错，请再次检查仓库名称是否按要求命名，同时检查Admin面板下Default Branch是否为 master
</code></p>

<p>但是到这里，当我去看Admin面板时，却只有source这个分支，而没有master分支，只有当我提交一篇文章后，master分支才出现。可能是因为Octopress的源文件都存放于source分支下，而deploy的都在master分支上。<a href="http://huanggang.me/archives/654">这里</a>有相关解释</p>

<pre><code>还有很重要的一步是把你的修改(文本修改，不包含”_deploy”目录，”deploy”目录保存;
”rake generate”生成的静态页面内容，会被”rake deploy”命令提交到”master branch”)
放到你的github pages(“source” branch)上
</code></pre>

<h3>更新Octopress</h3>

<p><code>bash
git pull octopress master     # Get the latest Octopress
bundle install                # Keep gems updated
rake update_source            # update the template's source
rake update_style             # update the template's style
</code></p>

<h3>写博客方法</h3>

<p>写博客主要是用以下几个命令，<a href="http://octopress.org/docs/blogging/">这里</a>有详细介绍：</p>

<ul>
<li>rake new_post[‘article name’] 生成博文框架，然后修改在source/_posts/下生成的文件即可</li>
<li>rake generate 生成静态文件</li>
<li>rake watch 检测文件变化，实时生成新内容</li>
<li>rake preview 在本机4000端口生成访问内容</li>
<li>rake deploy 发布文件</li>
</ul>


<p>博文是采用markdown语法，另外增加了一些扩充的插件，markdown的介绍文章网上可以搜到很多，比如<a href="http://daringfireball.net/projects/markdown/">这个</a>。</p>

<h4>zsh下无法新建博客的原因</h4>

<p>在 zsh 中若出现‘*’, ‘(’, ‘|’, ‘&lt;’, ‘[’, or ‘?’符号，则将其识别为查找文件名的通配符</p>

<p>快速解决：用引号括起来$ rake &ldquo;new_post[new_post.markdown]&rdquo;</p>

<p>彻底解决：取消zsh的通配(GLOB), 在.zshrc中加入alias rake=&ldquo;noglob rake&rdquo;</p>

<hr />

<h2>我的配置</h2>

<h3>分享和评论</h3>

<p>因为GFW的原因，我们需要先删除一些东西，不然会造成加载很慢的情况。</p>

<ul>
<li>/_config.yml，把里面的twitter相关信息全部删掉</li>
<li>/source/_includes/custom/head.html 把google的自定义字体去掉，原因同上。</li>
</ul>


<p>在/_config.yml 这个配置文件里的每一项都有相应的注释，可以改一些博客头，作者名之类的东西。</p>

<p>而配置评论和分享到微博功能。步骤如下：</p>

<ul>
<li>在_config.yml中增加一项： weibo_share: true</li>
<li>修改 source/_includes/post/sharing.html ，增加：</li>
</ul>


<br/>


<p><code>
// 下面的大括号是全角的，如果复制，请自行改成半角
｛% if site.weibo_share %｝
｛% include post/weibo.html %｝
｛% endif %｝
</code></p>

<ul>
<li>增加文件：source/_includes/post/weibo.html</li>
<li>访问 <a href="http://www.jiathis.com/">http://www.jiathis.com/</a> ，获取分享的代码</li>
<li>访问 <a href="http://uyan.cc/">http://uyan.cc/</a> ，获得评论的代码</li>
<li>将上面2步的代码都加入到weibo.html中即可</li>
</ul>


<h3>主题</h3>

<p>如果需要使用像我这样的主题，那么请参考这个：<a href="http://shashankmehta.in/archive/2012/greyshade.html">Introducing an Octopress Theme, Greyshade!</a></p>

<p>还需要带微博或Dribble分享的话，请参考这个：<a href="http://www.imallen.com/blog/2013/05/12/add-support-for-weibo-and-dribbble-to-greyshade.html">为 Octopress 的 Greyshade 主题增加新浪微博和 Dribbble 的支持</a></p>

<h3>更多参考博文(注：侧栏设置并不适用于Greyshade主题)：</h3>

<p><a href="http://shanewfx.github.io/blog/2012/08/13/improve-blog-theme/">Octopress主题改造</a></p>

<p><a href="http://www.yanjiuyanjiu.com/blog/20130402/">我的Octopress配置</a></p>
]]></content>
  </entry>
  
</feed>
