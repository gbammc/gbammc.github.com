
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>TheOS越狱开发 - Alvin Zhu</title>
	<meta name="author" content="Alvin Zhu">

	
	<meta name="description" content="TheOS越狱开发 因为最近对越狱开发感兴趣起来，所以果断利用Google去找资料，结果发现相关的东西却是少之又少，于是想如果我能在这个摸爬过程中学到一些东西的话，就都把它整理post出来，让更多有兴趣的人也能参与当中。 而对于越狱开发，我是这么认为的：为了利用iOS系统私有的API， &hellip;">
	<meta name="keywords" content="ios,theos,越狱开发,octopress">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Alvin Zhu" type="application/atom+xml">
	
	<link rel="canonical" href="http://gbammc.github.io/blog/2013/10/04/theosyue-yu-kai-fa/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		document.write("<img src='http://www.gravatar.com/avatar/" + MD5("gbammc@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
	</script>
</div>
<h1><a href="/">Alvin Zhu</a></h1>
<p class="subtitle">"人类渺小，<br>但不代表我要永世困于壁内。"</p>
<nav id="main-nav"><ul class="main">
	<li><a href="/">首页</a></li>
	<li><a href="/blog/archives">全部文章</a></li>
	<li><a href="/blog/categories">分类列表</a></li>
	<li><a href="/about">关于我</a></li>
	<li><a href="/friends">友情链接</a></li>
	<li><a href="https://itunes.apple.com/cn/app/id574437211">ifanr - 爱范儿客户端</a></li>
	<li><a href="https://itunes.apple.com/cn/app/id611036705">数读 - 用数字读懂世界</a></li>
	<li><a href="http://www.scau123.com/hnb/">iSCAU - 华农学子必备</a></li>
</ul></nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="weibo" href="http://www.weibo.com/blackteafeng" title="Weibo">Weibo</a>
		
		
		
		<a class="google" href="https://plus.google.com/101572322776670119375" rel="author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/alvin_zhu" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/gbammc" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>

</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">TheOS越狱开发</h1>
	<div class="entry-content" itemprop="articleBody"><p>因为最近对越狱开发感兴趣起来，所以果断利用Google去找资料，结果发现相关的东西却是少之又少，于是想如果我能在这个摸爬过程中学到一些东西的话，就都把它整理post出来，让更多有兴趣的人也能参与当中。</p>

<p>而对于越狱开发，我是这么认为的：为了利用iOS系统私有的API，你不得不去挖掘系统底层的东西，在这个过程中，你又会加深对整个系统的了解，从而将自己的开发水平提升一个档次。虽然苹果不会鼓励这样做，不过也是一条有乐趣的学习之道吧。</p>

<!-- more -->


<hr />

<h3>1.TheOS环境搭建</h3>

<p><a href="http://brandontreb.com/beginning-jailbroken-ios-development-your-first-tweak">http://brandontreb.com/beginning-jailbroken-ios-development-your-first-tweak</a>
这是国外很全面的TheOS环境搭建和打包工具安装以及一个简单TheOS程序示例，英语比较好的同学可以参照这一篇。</p>

<p>安装theos主要步骤如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">export </span><span class="nv">THEOS</span><span class="o">=</span>/opt/theos
</span><span class='line'><span class="nv">$ </span>git clone git://github.com/DHowett/theos.git <span class="nv">$THEOS</span>
</span><span class='line'><span class="nv">$ </span>sudo chmod -Rf 777 <span class="nv">$THEOS</span>
</span><span class='line'><span class="nv">$ </span>curl -s http://dl.dropbox.com/u/3157793/ldid &gt; <span class="nv">$THEOS</span>/bin/ldid
</span><span class='line'><span class="nv">$ </span>chmod 777 <span class="nv">$THEOS</span>/bin/ldid
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$THEOS</span>/include/IOSurface
</span><span class='line'><span class="nv">$ </span>sudo curl -O -k https://raw.github.com/javacom/toolchain4/master/Projects/IOSurfaceAPI.h
</span></code></pre></td></tr></table></div></figure>


<p>这样就完成TheOS的安装了。</p>

<p>另外还需要下载一个class-dump工具包，用于导出苹果库中的私有头文件:
<a href="https://github.com/nygard/class-dump">https://github.com/nygard/class-dump</a>
，或者也可以直接使用rpetrich大神的<a href="https://github.com/rpetrich/iphoneheaders">头文件库</a>。把得到的头文件解压并放到$THEOS/include中即可。</p>

<hr />

<h3>2.打包工具</h3>

<h4>1)安装Macports</h4>

<p>如果已经安装了那么可以忽略这一步，查看是否已经安装可以输入如下指令：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>port version
</span></code></pre></td></tr></table></div></figure>


<p>官方下载传送门：<a href="http://www.macports.org/install.php">http://www.macports.org/install.php</a></p>

<h4>2)安装dpkg</h4>

<p>安装dpkg的命令</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo port install dpkg
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>3.TheOS生成的Makefile文件剖析</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>include theos/makefiles/common.mk
</span></code></pre></td></tr></table></div></figure>


<p>告诉TheOS在编译脚本仲包括共同的make命令，避免做重复的make编译工作</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">TWEAK_NAME</span> <span class="o">=</span> HelloWorld
</span></code></pre></td></tr></table></div></figure>


<p>我们要变异的应用程序的名称。Makefile将会用这个常量在内部做一些事情。除非你的应用程序改名称，否则不要修改这个值。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>TWEAK_NAME<span class="o">]</span><span class="nv">_FILES</span> <span class="o">=</span> Tweak.xm
</span></code></pre></td></tr></table></div></figure>


<p>这里是需要编译的文件列表。注意：不要把头文件添加到这里。如果你要添加一个新的.m或者.mm文件到项目中，确保在这里添加新的文件名称，否则将不会建立编译连接。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>TWEAK_NAME<span class="o">]</span><span class="nv">_FRAMEWORKS</span> <span class="o">=</span> UIKit Foundation
</span></code></pre></td></tr></table></div></figure>


<p>这里包括你想用到框架的名称</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>include <span class="k">$(</span>THEOS_MAKE_PATH<span class="k">)</span>/application.mk
</span></code></pre></td></tr></table></div></figure>


<p>更多默认的用于帮助TheOS建立项目</p>

<hr />

<h3>4.第一个HelloWorld后台程序</h3>

<p>在终端中输入：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">export </span><span class="nv">THEOS</span><span class="o">=</span>/opt/theos/
</span><span class='line'><span class="nv">$ </span><span class="nb">export </span><span class="nv">SDKVERSION</span><span class="o">=</span>5.1            // sdk版本号
</span><span class='line'><span class="nv">$ $THEOS</span>/bin/nic.pl               // 执行TheOS
</span><span class='line'>NIC 2.0 - New Instance Creator
</span><span class='line'>------------------------------
</span><span class='line'>  <span class="o">[</span>1.<span class="o">]</span> iphone/application
</span><span class='line'>  <span class="o">[</span>2.<span class="o">]</span> iphone/cydget
</span><span class='line'>  <span class="o">[</span>3.<span class="o">]</span> iphone/dashboardx_widget
</span><span class='line'>  <span class="o">[</span>4.<span class="o">]</span> iphone/framework
</span><span class='line'>  <span class="o">[</span>5.<span class="o">]</span> iphone/library
</span><span class='line'>  <span class="o">[</span>6.<span class="o">]</span> iphone/notification_center_widget
</span><span class='line'>  <span class="o">[</span>7.<span class="o">]</span> iphone/preference_bundle
</span><span class='line'>  <span class="o">[</span>8.<span class="o">]</span> iphone/sbsettingstoggle
</span><span class='line'>  <span class="o">[</span>9.<span class="o">]</span> iphone/tool
</span><span class='line'>  <span class="o">[</span>10.<span class="o">]</span> iphone/tweak
</span><span class='line'>Choose a Template <span class="o">(</span>required<span class="o">)</span>: 10
</span><span class='line'>Project Name <span class="o">(</span>required<span class="o">)</span>: HelloWorld
</span><span class='line'>Package Name <span class="o">[</span>com.yourcompany.helloworld<span class="o">]</span>:
</span><span class='line'>Author/Maintainer Name <span class="o">[</span>Alvin<span class="o">]</span>:
</span><span class='line'><span class="o">[</span>iphone/tweak<span class="o">]</span> MobileSubstrate Bundle filter    <span class="o">[</span>com.apple.springboard<span class="o">]</span>:
</span><span class='line'>Instantiating iphone/tweak in helloworld/...
</span><span class='line'>Done.
</span></code></pre></td></tr></table></div></figure>


<p>我们创建一个后台程序，要做的是当系统开机时候弹出HelloWorld字样的Alert框。</p>

<p>打开Tweak.xm文件，清空后添加以下代码</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#import &lt;UIKit/UIKit.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">%</span><span class="n">hook</span> <span class="n">SpringBoard</span>
</span><span class='line'>
</span><span class='line'><span class="o">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">applicationDidFinishLaunching:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">application</span> <span class="p">{</span>
</span><span class='line'>  <span class="o">%</span><span class="n">orig</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">UIAlertView</span> <span class="o">*</span><span class="n">alert</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle:</span><span class="s">@&quot;Welcome&quot;</span>
</span><span class='line'>      <span class="nl">message:</span><span class="s">@&quot;Welcome to your iPhone Brandon!&quot;</span>
</span><span class='line'>      <span class="nl">delegate:</span><span class="nb">nil</span>
</span><span class='line'>      <span class="nl">cancelButtonTitle:</span><span class="s">@&quot;Thanks&quot;</span>
</span><span class='line'>      <span class="nl">otherButtonTitles:</span><span class="nb">nil</span><span class="p">];</span>
</span><span class='line'>  <span class="p">[</span><span class="n">alert</span> <span class="n">show</span><span class="p">];</span>
</span><span class='line'>  <span class="p">[</span><span class="n">alert</span> <span class="n">release</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">%</span><span class="n">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>因为我们要用到hook（钩子）钩取系统开机时候调用的其中一个函数，在那个函数中插入我们的Alert。%orig;功能是执行这个函数原来的动作。如果你想完完全全禁止某个函数的功能，不使用 %orig;即可。</p>

<p>然后打开Makefile文件添加</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">HelloWorld_FRAMEWORKS</span> <span class="o">=</span> UIKit
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>5.编译和安装</h3>

<p>至此，便到了编译和安装的步骤：</p>

<p><strong>1.利用ssh安装</strong></p>

<p>首先export iPhone的ip：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">export </span><span class="nv">THEOS_DEVICE_IP</span><span class="o">=</span>192.168.1.115
</span></code></pre></td></tr></table></div></figure>


<p>然后输入：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>make install
</span></code></pre></td></tr></table></div></figure>


<p>在运行过程中可能会多次要求输入密码，默认是alpine。安装完成后，你的设备就会自动重启，并且会显示你自定义的信息。</p>

<p><strong>2.自行打包手动安装</strong></p>

<p>打开控制台，进入到你的这个工程文件夹，使用命令</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>make
</span><span class='line'>make package
</span></code></pre></td></tr></table></div></figure>


<p>然后会生成一个com.yourcompany.fooproject_0.0.1-1_iphoneos-arm.deb这样的包在你的目录中，</p>

<p>然后利用iFunbox，iTools等工具将改包放到/private/var/root/Media/Cydia/AutoInstall/中，那么就会自动安装。</p>

<p>或者也可以使用iFiles手动安装。</p>

<hr />

<h3>PS：</h3>

<p>在输入make install后可能会出现一下几种情况：</p>

<h5>1.ssh Connection refused</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ssh: connect to host 192.168.1.115 port 22: Connection refused
</span><span class='line'>lost connection
</span></code></pre></td></tr></table></div></figure>


<p>这是因为你还没有打开ssh，在SBSettings里的开关中你应该见到对应的开关。</p>

<h5>2.Connection closed by remote host</h5>

<p>从Cydia里安装SBSettings和OpenSSH后，如果在终端里输入</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ssh root@192.168.1.115           // iPhone和Mac处于同一网络下
</span></code></pre></td></tr></table></div></figure>


<p>后，出现</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ssh_exchange_identification: Connection closed by remote host
</span></code></pre></td></tr></table></div></figure>


<p>那么应该立刻使用iFunBox等软件进入iPhone的文件系统，并删除以下内容</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/System/Library/LaunchDaemons/com.ikey.bbot.plist
</span><span class='line'>/bin/poc-bbot
</span></code></pre></td></tr></table></div></figure>


<p>然后重新安装OpenSSH。</p>

<p>出现以上问题，说明你的iPhone已经中了名叫ikee的病毒，所以如果装了OpenSSH后，应该立刻改掉你的root密码，默认是alpine。例如在Cydia安装Mobile Terminal，然后输入</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>su
</span><span class='line'>// 输入密码如：alpine
</span><span class='line'><span class="nv">$ </span>passwd root // 输入新密码
</span></code></pre></td></tr></table></div></figure>


<p>参考资料：<a href="http://hi.baidu.com/celavi/item/83c5c68e241b5cd55f0ec1ad">[iPhone]OpenSSH连不上：ssh_exchange_identification: Connection closed by remote host</a></p>

<h5>3.collect2: ld terminated with signal 6 [Abort trap: 6]</h5>

<p>出现如下错误：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Making all <span class="k">for </span>tweak PreferenceLoader...
</span><span class='line'>Preprocessing Tweak.xm...
</span><span class='line'>Compiling Tweak.xm...
</span><span class='line'>Linking tweak PreferenceLoader...
</span><span class='line'>collect2: ld terminated with signal 6 <span class="o">[</span>Abort <span class="nb">trap</span>: 6<span class="o">]</span>
</span><span class='line'>ld<span class="o">(</span>8724,0x7fff78fd2960<span class="o">)</span> malloc: *** error <span class="k">for </span>object 0x7f89b35003f0: pointer being freed was not allocated
</span><span class='line'>*** <span class="nb">set </span>a breakpoint in mallocerror_break to debug
</span><span class='line'>make<span class="o">[</span>2<span class="o">]</span>: *** <span class="o">[</span>obj/PreferenceLoader.dylib<span class="o">]</span> Error 1
</span><span class='line'>make<span class="o">[</span>1<span class="o">]</span>: *** <span class="o">[</span>internal-library-all<span class="o">]</span> Error 2
</span><span class='line'>make: *** <span class="o">[</span>PreferenceLoader.all.tweak.variables<span class="o">]</span> Error 2
</span></code></pre></td></tr></table></div></figure>


<p>那是因为Xcode4.5附带的两个不同版本的链接器。一个用于gcc来编译armv6架构，另一个clang则不会产生armv6的输出。现在没有理由用6.0的SDK去targetiOS4.3以下的系统，或其它基于armv6的平台。我们可以在Makefile最顶部加上如下两句：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">export </span><span class="nv">ARCHS</span><span class="o">=</span>armv7
</span><span class='line'><span class="nb">export </span><span class="nv">TARGET</span><span class="o">=</span>iphone:latest:4.3
</span></code></pre></td></tr></table></div></figure>


<p>另外，如果要兼容低版本那么可以替换为：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">export </span><span class="nv">ARCHS</span><span class="o">=</span>armv6 armv7
</span><span class='line'><span class="nb">export </span><span class="nv">TARGET</span><span class="o">=</span>iphone:&lt;sdkversion-lower-than-6.0&gt;:&lt;deployment target-higher-than-3.0&gt;
</span></code></pre></td></tr></table></div></figure>

</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style addthis_16x16_style">
	
	<a class="addthis_button_sinaweibo"></a>
	
	
	<a class="addthis_button_facebook"></a>
	
	
	
	
	<a class="addthis_button_compact"></a>
	<a class="addthis_counter addthis_bubble_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
	Copyright &copy; 2014 - 
	
    	Alvin Zhu
	 - 
	Powered by <a href="http://octopress.org">Octopress</a>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'alvinzhusblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://gbammc.github.io/blog/2013/10/04/theosyue-yu-kai-fa/';
        var disqus_url = 'http://gbammc.github.io/blog/2013/10/04/theosyue-yu-kai-fa/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-44493661-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



		</div>
	</div>
</body>
</html>
